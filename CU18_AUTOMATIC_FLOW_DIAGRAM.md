# CU18 - Diagrama de Flujo AutomÃ¡tico

## ğŸ“Š VisualizaciÃ³n del Proceso AutomÃ¡tico

### Escenario 1: Usuario Inicia SesiÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUARIO EN NAVEGADOR                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    Ingresa usuario/contraseÃ±a
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SISTEMA BACKEND (Laravel)                  â”‚
â”‚                                                               â”‚
â”‚  AuthController::login()                                     â”‚
â”‚  {                                                            â”‚
â”‚    // ... validar usuario ...                                â”‚
â”‚                                                               â”‚
â”‚    â­ Bitacora::registrar(                                    â”‚
â”‚       'AutenticaciÃ³n',                                        â”‚
â”‚       'Inicio de sesiÃ³n exitoso',                            â”‚
â”‚       $usuario->id_usuario                                   â”‚
â”‚    );  â† AUTOMÃTICO                                           â”‚
â”‚  }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    CapturaBitÃ¡cora:
                    â€¢ IP: 192.168.1.100
                    â€¢ User-Agent: Chrome...
                    â€¢ Timestamp: 2024-11-15 14:30:45
                    â€¢ Usuario: admin
                    â€¢ MÃ³dulo: AutenticaciÃ³n
                    â€¢ AcciÃ³n: Inicio de sesiÃ³n
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BASE DE DATOS (PostgreSQL)                 â”‚
â”‚                                                               â”‚
â”‚  INSERT INTO bitacora (                                      â”‚
â”‚    modulo, accion, id_usuario, ip_address,                  â”‚
â”‚    user_agent, fecha_accion, ...                            â”‚
â”‚  ) VALUES (...)                                              â”‚
â”‚                                                               â”‚
â”‚  âœ… Registro guardado automÃ¡ticamente                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Escenario 2: Docente Genera QR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUARIO EN NAVEGADOR                    â”‚
â”‚                                                               â”‚
â”‚  [BotÃ³n "Generar QR"] â† Usuario hace clic                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    HTTP POST /api/asistencias/generar-qr
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SISTEMA BACKEND (RegistroAsistenciaController)  â”‚
â”‚                                                               â”‚
â”‚  generarSesion($request)                                     â”‚
â”‚  {                                                            â”‚
â”‚    // ... crear QR ...                                       â”‚
â”‚    $qr = QR::generar(...);                                   â”‚
â”‚                                                               â”‚
â”‚    â­ Bitacora::registrar(                                    â”‚
â”‚       'Asistencia_Docente',                                  â”‚
â”‚       'GENERAR_SESION',                                      â”‚
â”‚       Auth::user()->id_usuario,                              â”‚
â”‚       [                                                       â”‚
â”‚         'qr_code' => $qr->codigo,                            â”‚
â”‚         'duracion' => 60,                                    â”‚
â”‚         'asignacion' => $request->id_asignacion              â”‚
â”‚       ]                                                       â”‚
â”‚    );  â† AUTOMÃTICO                                           â”‚
â”‚                                                               â”‚
â”‚    return response()->json(['qr' => $qr]);                   â”‚
â”‚  }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    CapturaBitÃ¡cora:
                    â€¢ IP: 192.168.1.101
                    â€¢ User-Agent: Firefox...
                    â€¢ Timestamp: 2024-11-15 14:35:20
                    â€¢ Usuario: docente_001
                    â€¢ MÃ³dulo: Asistencia_Docente
                    â€¢ AcciÃ³n: GENERAR_SESION
                    â€¢ Detalles JSON: QR y duraciÃ³n
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BASE DE DATOS (PostgreSQL)                 â”‚
â”‚                                                               â”‚
â”‚  INSERT INTO bitacora (                                      â”‚
â”‚    modulo='Asistencia_Docente',                              â”‚
â”‚    accion='GENERAR_SESION',                                  â”‚
â”‚    detalles_json='{"qr_code":"...", ...}',                   â”‚
â”‚    ...                                                        â”‚
â”‚  ) VALUES (...)                                              â”‚
â”‚                                                               â”‚
â”‚  âœ… Registro guardado automÃ¡ticamente                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Escenario 3: Admin Visualiza BitÃ¡cora

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ADMIN EN http://localhost:3000/bitacora       â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ CU18 - Registrar BitÃ¡cora                         â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                                                   â”‚       â”‚
â”‚  â”‚  ğŸ“Š EstadÃ­sticas                                  â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚  â”‚ 147     â”‚ â”‚ 12      â”‚ â”‚ 23      â”‚ â”‚ 5       â”‚ â”‚       â”‚
â”‚  â”‚  â”‚ Accionesâ”‚ â”‚ Hoy     â”‚ â”‚ Usuariosâ”‚ â”‚ MÃ³dulos â”‚ â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚  â”‚                                                   â”‚       â”‚
â”‚  â”‚  Filtros                                          â”‚       â”‚
â”‚  â”‚  [Usuario â–¼] [MÃ³dulo â–¼] [AcciÃ³n â–¼] [Fecha â–¼]   â”‚       â”‚
â”‚  â”‚                                                   â”‚       â”‚
â”‚  â”‚  Tabla de Registros                              â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚  â”‚User â”‚MÃ³dulo        â”‚AcciÃ³n        â”‚Fecha   â”‚  â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚       â”‚
â”‚  â”‚  â”‚adminâ”‚AutenticaciÃ³n â”‚Inicio sesiÃ³n â”‚14:30:45â”‚  â”‚       â”‚
â”‚  â”‚  â”‚     â”‚              â”‚exitoso       â”‚        â”‚  â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚       â”‚
â”‚  â”‚  â”‚doc1 â”‚Asistencia_D  â”‚GENERAR_SESIONâ”‚14:35:20â”‚  â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚       â”‚
â”‚  â”‚  â”‚est1 â”‚Asistencia_D  â”‚REGISTRAR_QR  â”‚14:36:10â”‚  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â”‚                                                   â”‚       â”‚
â”‚  â”‚  [â—„ Anterior] 1 2 3 ... [Siguiente â–º]           â”‚       â”‚
â”‚  â”‚  [ğŸ“¥ Descargar CSV]                             â”‚       â”‚
â”‚  â”‚                                                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â”‚  Â¿IntervenciÃ³n manual? âŒ NO                                 â”‚
â”‚  Â¿Se actualizan los registros? âœ… SÃ, automÃ¡ticamente       â”‚
â”‚  Â¿Se ven todas las acciones? âœ… SÃ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    GET /api/bitacora
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            BitacoraController::listarAcciones()              â”‚
â”‚                                                               â”‚
â”‚  {                                                            â”‚
â”‚    // Obtiene registros de BD sin intervenciÃ³n manual       â”‚
â”‚    $bitacoras = Bitacora::with('usuario')                   â”‚
â”‚                    ->orderBy('fecha_accion', 'desc')         â”‚
â”‚                    ->paginate(50);                           â”‚
â”‚                                                               â”‚
â”‚    // Retorna JSON                                           â”‚
â”‚    return response()->json($bitacoras);                      â”‚
â”‚  }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Ciclo Completo de una AcciÃ³n

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   USUARIO REALIZA UNA ACCIÃ“N                    â”‚
     â”‚   (Login, Generar QR, Resolver Inasistencia)   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   CONTROLADOR PROCESA LA SOLICITUD              â”‚
     â”‚   AuthController::login()                       â”‚
     â”‚   RegistroAsistenciaController::generarSesion() â”‚
     â”‚   GestionInasistenciasController::revisar()     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   â­ LLAMADA AUTOMÃTICA A:                      â”‚
     â”‚   Bitacora::registrar(                          â”‚
     â”‚     modulo,        // 'AutenticaciÃ³n'           â”‚
     â”‚     accion,        // 'Inicio de sesiÃ³n'        â”‚
     â”‚     idUsuario,     // Auth::user()->id          â”‚
     â”‚     detalles       // [...informaciÃ³n extra]    â”‚
     â”‚   )                                             â”‚
     â”‚                                                 â”‚
     â”‚   CAPTURA AUTOMÃTICAMENTE:                      â”‚
     â”‚   â€¢ request()->ip()                             â”‚
     â”‚   â€¢ request()->header('User-Agent')             â”‚
     â”‚   â€¢ now() (timestamp con timezone)              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   CREATE EN BASE DE DATOS                       â”‚
     â”‚   (modelo Bitacora crea nuevo registro)         â”‚
     â”‚                                                 â”‚
     â”‚   Tabla bitacora:                               â”‚
     â”‚   â€¢ modulo âœ… guardado                          â”‚
     â”‚   â€¢ accion âœ… guardado                          â”‚
     â”‚   â€¢ id_usuario âœ… guardado                      â”‚
     â”‚   â€¢ ip_address âœ… guardado (automÃ¡tico)         â”‚
     â”‚   â€¢ user_agent âœ… guardado (automÃ¡tico)         â”‚
     â”‚   â€¢ fecha_accion âœ… guardado (automÃ¡tico)       â”‚
     â”‚   â€¢ detalles_json âœ… guardado                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   âœ… REGISTRO COMPLETADO                        â”‚
     â”‚                                                 â”‚
     â”‚   El usuario continÃºa sin saber que:            â”‚
     â”‚   â€¢ Su acciÃ³n fue registrada                    â”‚
     â”‚   â€¢ Su IP fue capturada                         â”‚
     â”‚   â€¢ Un timestamp fue asignado                   â”‚
     â”‚   â€¢ Su User-Agent fue guardado                  â”‚
     â”‚   â€¢ Todo en la base de datos de auditorÃ­a       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   ADMIN ACCEDE A /bitacora                      â”‚
     â”‚                                                 â”‚
     â”‚   VE AUTOMÃTICAMENTE:                           â”‚
     â”‚   âœ… Todas las acciones registradas             â”‚
     â”‚   âœ… InformaciÃ³n completa (IP, User-Agent)      â”‚
     â”‚   âœ… PaginaciÃ³n y filtros                       â”‚
     â”‚   âœ… OpciÃ³n de exportar a CSV                   â”‚
     â”‚   âœ… EstadÃ­sticas en tiempo real                â”‚
     â”‚                                                 â”‚
     â”‚   âŒ Sin intervenciÃ³n manual                    â”‚
     â”‚   âŒ Sin necesidad de llenar formularios        â”‚
     â”‚   âŒ Sin pasos adicionales                      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ 7 Puntos de Captura AutomÃ¡tica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PUNTOS DE CAPTURA AUTOMÃTICA                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£  AUTENTICACIÃ“N - LOGIN                                      â”‚
â”‚      UbicaciÃ³n: AuthController.php:53                           â”‚
â”‚      Trigger: Usuario hace login                                â”‚
â”‚      AcciÃ³n registrada: "Inicio de sesiÃ³n exitoso"             â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp              â”‚
â”‚                                                                 â”‚
â”‚  2ï¸âƒ£  AUTENTICACIÃ“N - LOGOUT                                     â”‚
â”‚      UbicaciÃ³n: AuthController.php:93                           â”‚
â”‚      Trigger: Usuario hace logout                               â”‚
â”‚      AcciÃ³n registrada: "Cierre de sesiÃ³n"                     â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp              â”‚
â”‚                                                                 â”‚
â”‚  3ï¸âƒ£  ASISTENCIA - GENERAR QR                                    â”‚
â”‚      UbicaciÃ³n: RegistroAsistenciaController.php:75            â”‚
â”‚      Trigger: Docente genera QR para clase                     â”‚
â”‚      AcciÃ³n registrada: "GENERAR_SESION"                       â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp + QR code    â”‚
â”‚                                                                 â”‚
â”‚  4ï¸âƒ£  ASISTENCIA - REGISTRAR POR QR                              â”‚
â”‚      UbicaciÃ³n: RegistroAsistenciaController.php:260           â”‚
â”‚      Trigger: Estudiante escanea QR                             â”‚
â”‚      AcciÃ³n registrada: "REGISTRAR_ASISTENCIA_QR"             â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp + QR code    â”‚
â”‚                                                                 â”‚
â”‚  5ï¸âƒ£  ASISTENCIA - CERRAR SESIÃ“N                                 â”‚
â”‚      UbicaciÃ³n: RegistroAsistenciaController.php:350           â”‚
â”‚      Trigger: Docente cierra sesiÃ³n de asistencia              â”‚
â”‚      AcciÃ³n registrada: "CERRAR_SESION"                        â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp              â”‚
â”‚                                                                 â”‚
â”‚  6ï¸âƒ£  INASISTENCIAS - SUBIR JUSTIFICATIVO                        â”‚
â”‚      UbicaciÃ³n: GestionInasistenciasController.php:120         â”‚
â”‚      Trigger: Estudiante sube justificativo                    â”‚
â”‚      AcciÃ³n registrada: "SUBIR_JUSTIFICATIVO"                  â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp + nombre archivo
â”‚                                                                 â”‚
â”‚  7ï¸âƒ£  INASISTENCIAS - RESOLVER                                   â”‚
â”‚      UbicaciÃ³n: GestionInasistenciasController.php:195         â”‚
â”‚      Trigger: Admin aprueba/rechaza justificativo              â”‚
â”‚      AcciÃ³n registrada: "RESOLVER_INASISTENCIA"               â”‚
â”‚      Datos automÃ¡ticos: IP, User-Agent, timestamp + decisiÃ³n   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Comparativa: Manual vs AutomÃ¡tico

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       âŒ MANUAL (No es nuestro)       â”‚      âœ… AUTOMÃTICO (Lo nuestro)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚                                      â”‚
â”‚  Paso 1: Usuario realiza acciÃ³n      â”‚  Paso 1: Usuario realiza acciÃ³n      â”‚
â”‚  Paso 2: Usuario abre bitÃ¡cora       â”‚  Paso 2: Sistema captura todo        â”‚
â”‚  Paso 3: Usuario llena formulario    â”‚  (proceso invisible)                 â”‚
â”‚  Paso 4: Usuario presiona "Guardar"  â”‚                                      â”‚
â”‚  Paso 5: Sistema registra            â”‚  El usuario NO hace nada mÃ¡s         â”‚
â”‚                                      â”‚                                      â”‚
â”‚  Problemas:                          â”‚  Ventajas:                           â”‚
â”‚  â€¢ Lento (muchos pasos)              â”‚  â€¢ RÃ¡pido (cero pasos adicionales)   â”‚
â”‚  â€¢ Propenso a errores                â”‚  â€¢ Confiable (automatizado)          â”‚
â”‚  â€¢ Usuario se olvida                 â”‚  â€¢ Completo (nada se pierde)         â”‚
â”‚  â€¢ Datos inconsistentes              â”‚  â€¢ Consistente (siempre igual)       â”‚
â”‚  â€¢ InformaciÃ³n incompleta            â”‚  â€¢ Completa (todos los datos)        â”‚
â”‚                                      â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ Arquitectura AutomÃ¡tica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ARQUITECTURA CU18                           â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CAPA DE PRESENTACIÃ“N                      â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â€¢ Usuario realiza acciones normalmente                      â”‚  â”‚
â”‚  â”‚  â€¢ No ve ni toca nada de la bitÃ¡cora                         â”‚  â”‚
â”‚  â”‚  â€¢ Las acciones fluyen al backend                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   CAPA DE APLICACIÃ“N                         â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  AuthController              RegistroAsistenciaController   â”‚  â”‚
â”‚  â”‚  â”œâ”€ login()      â­ Bitacora::registrar()                   â”‚  â”‚
â”‚  â”‚  â””â”€ logout()     â­ Bitacora::registrar()                   â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚                       GestionInasistenciasController        â”‚  â”‚
â”‚  â”‚                       â”œâ”€ subirJustificativo() â­ registrar  â”‚  â”‚
â”‚  â”‚                       â””â”€ revisar() â­ registrar             â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚                  Cada controlador AUTOMÃTICAMENTE            â”‚  â”‚
â”‚  â”‚                  llama a Bitacora::registrar()              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CAPA DE MODELO                            â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  class Bitacora                                             â”‚  â”‚
â”‚  â”‚  {                                                           â”‚  â”‚
â”‚  â”‚    public static function registrar($modulo, $accion, ...)  â”‚  â”‚
â”‚  â”‚    {                                                         â”‚  â”‚
â”‚  â”‚      return self::create([                                  â”‚  â”‚
â”‚  â”‚        'modulo' => $modulo,              // Pasado           â”‚  â”‚
â”‚  â”‚        'accion' => $accion,              // Pasado           â”‚  â”‚
â”‚  â”‚        'id_usuario' => $idUsuario,       // Pasado           â”‚  â”‚
â”‚  â”‚        'ip_address' => request()->ip(),  // â­ AUTOMÃTICO    â”‚  â”‚
â”‚  â”‚        'user_agent' => request()->header('User-Agent'),     â”‚  â”‚
â”‚  â”‚                                          // â­ AUTOMÃTICO    â”‚  â”‚
â”‚  â”‚        'fecha_accion' => now(),          // â­ AUTOMÃTICO    â”‚  â”‚
â”‚  â”‚        'detalles_json' => json_encode($detalles)            â”‚  â”‚
â”‚  â”‚      ]);                                                     â”‚  â”‚
â”‚  â”‚    }                                                         â”‚  â”‚
â”‚  â”‚  }                                                           â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  MÃ©todo: AUTOMÃTICAMENTE captura IP, User-Agent, timestamp  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                 CAPA DE DATOS (PostgreSQL)                   â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  Tabla: bitacora                                            â”‚  â”‚
â”‚  â”‚  Columnas:                                                  â”‚  â”‚
â”‚  â”‚  â€¢ id_bit (PK)                                              â”‚  â”‚
â”‚  â”‚  â€¢ modulo                                                   â”‚  â”‚
â”‚  â”‚  â€¢ accion                                                   â”‚  â”‚
â”‚  â”‚  â€¢ id_usuario (FK)                                          â”‚  â”‚
â”‚  â”‚  â€¢ ip_address      â† Capturada automÃ¡ticamente              â”‚  â”‚
â”‚  â”‚  â€¢ user_agent      â† Capturada automÃ¡ticamente              â”‚  â”‚
â”‚  â”‚  â€¢ fecha_accion    â† Capturada automÃ¡ticamente              â”‚  â”‚
â”‚  â”‚  â€¢ detalles_json                                            â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  Ãndices: id_usuario, fecha_accion, modulo, accion         â”‚  â”‚
â”‚  â”‚  (para bÃºsquedas rÃ¡pidas)                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            API PARA CONSULTAR BITÃCORA                      â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  GET /api/bitacora                   â†’ Listar registros     â”‚  â”‚
â”‚  â”‚  GET /api/bitacora/{id}              â†’ Ver detalles         â”‚  â”‚
â”‚  â”‚  GET /api/bitacora/estadisticas      â†’ Dashboard stats      â”‚  â”‚
â”‚  â”‚  POST /api/bitacora/exportar-csv     â†’ Descargar CSV        â”‚  â”‚
â”‚  â”‚  GET /api/bitacora/filtrar           â†’ Filtros avanzados    â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              INTERFAZ PARA ADMIN (React)                     â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  http://localhost:3000/bitacora                             â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â€¢ EstadÃ­sticas en tiempo real                              â”‚  â”‚
â”‚  â”‚  â€¢ Tabla con todos los registros                            â”‚  â”‚
â”‚  â”‚  â€¢ Filtros (usuario, mÃ³dulo, acciÃ³n, fecha)                 â”‚  â”‚
â”‚  â”‚  â€¢ PaginaciÃ³n                                               â”‚  â”‚
â”‚  â”‚  â€¢ Modal con detalles completos                             â”‚  â”‚
â”‚  â”‚  â€¢ Export a CSV                                             â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  âŒ Sin intervenciÃ³n manual para registrar                  â”‚  â”‚
â”‚  â”‚  âœ… Solo lectura/consulta/filtrado                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Seguridad AutomÃ¡tica

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MECANISMOS DE SEGURIDAD AUTOMÃTICOS              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸ”’ IP ADDRESS                                             â”‚
â”‚     â€¢ Capturada automÃ¡ticamente: request()->ip()           â”‚
â”‚     â€¢ Verificar origen de las acciones                     â”‚
â”‚     â€¢ Detectar accesos sospechosos                         â”‚
â”‚                                                            â”‚
â”‚  ğŸ”’ USER-AGENT                                             â”‚
â”‚     â€¢ Capturado automÃ¡ticamente: request()->header()       â”‚
â”‚     â€¢ Verificar navegador/dispositivo usado                â”‚
â”‚     â€¢ Detectar cambios anormales                           â”‚
â”‚                                                            â”‚
â”‚  ğŸ”’ TIMESTAMP EXACTO                                       â”‚
â”‚     â€¢ Capturado automÃ¡ticamente: now() con timezone        â”‚
â”‚     â€¢ Saber exactamente cuÃ¡ndo sucediÃ³ cada acciÃ³n         â”‚
â”‚     â€¢ Crear lÃ­nea temporal de eventos                      â”‚
â”‚                                                            â”‚
â”‚  ğŸ”’ ID USUARIO                                             â”‚
â”‚     â€¢ Saber quiÃ©n realizÃ³ cada acciÃ³n                      â”‚
â”‚     â€¢ Vincular a usuario autenticado                       â”‚
â”‚     â€¢ Responsabilidad clara                                â”‚
â”‚                                                            â”‚
â”‚  ğŸ”’ AUTENTICACIÃ“N REQUERIDA                                â”‚
â”‚     â€¢ API requiere: auth:sanctum middleware                â”‚
â”‚     â€¢ Solo usuarios autenticados pueden acceder            â”‚
â”‚     â€¢ Solo administradores ven bitÃ¡cora                    â”‚
â”‚                                                            â”‚
â”‚  ğŸ”’ DETALLES CONTEXTUALES                                  â”‚
â”‚     â€¢ JSON con informaciÃ³n especÃ­fica de cada acciÃ³n       â”‚
â”‚     â€¢ Facilita investigaciÃ³n de incidentes                 â”‚
â”‚     â€¢ Completa la auditorÃ­a con contexto                   â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Resumen Visual

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   CU18 - BITÃCORA AUTOMÃTICA                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                   â•‘
â•‘  ğŸ¯ OBJETIVO:                                                     â•‘
â•‘  Registrar AUTOMÃTICAMENTE todas las acciones del usuario         â•‘
â•‘  Sin intervenciÃ³n manual en ningÃºn punto                          â•‘
â•‘                                                                   â•‘
â•‘  ğŸ”§ CÃ“MO FUNCIONA:                                                â•‘
â•‘  Usuario Realiza AcciÃ³n                                           â•‘
â•‘    â†“                                                              â•‘
â•‘  Sistema AutomÃ¡ticamente Llama Bitacora::registrar()              â•‘
â•‘    â†“                                                              â•‘
â•‘  Se Capturan AutomÃ¡ticamente: IP, User-Agent, Timestamp           â•‘
â•‘    â†“                                                              â•‘
â•‘  Se Inserta en Base de Datos                                      â•‘
â•‘    â†“                                                              â•‘
â•‘  Admin Accede a /bitacora y Ve TODO AutomÃ¡ticamente               â•‘
â•‘                                                                   â•‘
â•‘  âœ… RESULTADO:                                                    â•‘
â•‘  âœ“ 100% AutomÃ¡tico (cero pasos manuales)                          â•‘
â•‘  âœ“ 100% Seguro (IP, User-Agent, timestamp capturados)             â•‘
â•‘  âœ“ 100% Confiable (nunca se pierde nada)                          â•‘
â•‘  âœ“ 100% Auditable (admin ve todo sin hacer nada)                  â•‘
â•‘                                                                   â•‘
â•‘  ğŸ“Š 7 PUNTOS DE CAPTURA:                                          â•‘
â•‘  1. Login âœ…                                                      â•‘
â•‘  2. Logout âœ…                                                     â•‘
â•‘  3. Generar QR âœ…                                                 â•‘
â•‘  4. Registrar Asistencia âœ…                                       â•‘
â•‘  5. Cerrar SesiÃ³n âœ…                                              â•‘
â•‘  6. Subir Justificativo âœ…                                        â•‘
â•‘  7. Resolver Inasistencia âœ…                                      â•‘
â•‘                                                                   â•‘
â•‘  ğŸ“ CONCLUSIÃ“N:                                                   â•‘
â•‘  La bitÃ¡cora es completamente AUTOMÃTICA.                         â•‘
â•‘  El usuario nunca necesita intervenir manualmente.                â•‘
â•‘  Todo sucede transparentemente en el backend.                     â•‘
â•‘                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
